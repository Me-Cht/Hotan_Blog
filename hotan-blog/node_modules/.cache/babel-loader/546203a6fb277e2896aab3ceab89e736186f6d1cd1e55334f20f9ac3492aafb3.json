{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport router from \"@/router/router\";\nconst baseURL = 'http://hotan.site:8088';\nimport store from \"@/store/store\";\nimport axios from 'axios';\naxios.defaults.baseURL = baseURL;\nconst request = (method, url, data) => {\n  return axios({\n    method,\n    url,\n    data\n  });\n};\nconst requestWithParams = (method, url, params) => {\n  return axios({\n    method,\n    url,\n    params\n  });\n};\n\n// UserAPI\nexport const login = (name, password) => {\n  return axios.post('/api/user/login', {\n    name,\n    password\n  }).then(response => response.data.token);\n};\nexport const getToken = (name, password) => {\n  return login(name, password);\n};\nexport const getUser = () => {\n  return request('get', '/api/user/getAllData');\n};\nexport const register = ruleForm => {\n  return request('post', '/api/user/register', ruleForm);\n};\nexport const getDetailInfo = () => {\n  const token = localStorage.getItem('token');\n  if (!token) {\n    // Promise.reject 是 Promise 对象的一个静态方法，\n    // 用于返回一个被拒绝（rejected）的 Promise 实例。\n    // Promise.reject 返回的 Promise 实例会以指定的理由（reason）被拒绝，\n    // 可以在后续的 catch 方法中捕获并处理该拒绝。\n    return Promise.reject(\"Missing the token!\");\n  }\n  return new Promise((resolve, reject) => {\n    axios.get('/api/user/info', {\n      params: {\n        token: token\n      }\n    }).then(response => {\n      resolve(JSON.parse(response.data.msg));\n    }).catch(error => {\n      reject(error);\n    });\n  });\n};\nexport const getUserInfo = () => {\n  const token = localStorage.getItem('token');\n  if (!token) {\n    router.push('/login');\n    return \"Missing token\";\n  }\n  return axios.get('/api/user/info/', {\n    params: {\n      token: store.state.token\n    }\n  });\n};\nexport const testlogin = () => {\n  const data = {\n    name: '',\n    password: ''\n  };\n  const response = axios.get('/api/user/login', data);\n  const result = response.data;\n  if (result.code === '0') {\n    const token = response.data.data;\n    localStorage.setItem('token', token);\n  } else {\n    alert(\"账号或密码错误！\");\n  }\n};\nexport const logout = () => {\n  localStorage.removeItem('token');\n  localStorage.removeItem('user');\n  this.$store.commit('setToken', null);\n  this.$router.push('/login');\n  return axios.get('/api/user/logout');\n};\n\n//productAPI\n\nexport const getFruit = () => {\n  return axios.get('/api/product/findAll');\n};\nexport const addFruit = () => {\n  return request('post', '/add');\n};\n\n// articleAPI\nexport const getArticle = () => {\n  return request('get', '/api/article/findAll');\n};\nexport const writeArticle = article => {\n  return request('post', '/api/article/write', article);\n};\nexport const getSelfArticle = id => {\n  return axios.get(`/api/article/myblog/${id}`);\n};\nexport default {\n  getFruit,\n  login,\n  getUser,\n  register,\n  getArticle,\n  writeArticle,\n  getToken,\n  getUserInfo,\n  requestWithParams,\n  logout,\n  getDetailInfo,\n  getSelfArticle,\n  testlogin\n  // 导出其他接口函数...\n};","map":{"version":3,"names":["router","baseURL","store","axios","defaults","request","method","url","data","requestWithParams","params","login","name","password","post","then","response","token","getToken","getUser","register","ruleForm","getDetailInfo","localStorage","getItem","Promise","reject","resolve","get","JSON","parse","msg","catch","error","getUserInfo","push","state","testlogin","result","code","setItem","alert","logout","removeItem","$store","commit","$router","getFruit","addFruit","getArticle","writeArticle","article","getSelfArticle","id"],"sources":["/Users/chenhetian/04Front_end/FruitVue0629/hotan-blog/src/api/api.js"],"sourcesContent":["import router from \"@/router/router\";\n\nconst baseURL = 'http://hotan.site:8088';\nimport store from \"@/store/store\";\nimport axios from 'axios'\naxios.defaults.baseURL = baseURL;\nconst request = (method,url,data)=>{\n    return axios({\n        method,\n        url,\n        data\n    });\n};\n\nconst requestWithParams = (method, url, params) => {\n    return axios({\n        method,\n        url,\n        params,\n    });\n};\n\n// UserAPI\nexport const login = (name, password) => {\n    return axios.post('/api/user/login', {name, password})\n        .then(response => response.data.token)\n}\n\n\nexport const getToken = (name,password)=> {\n    return login(name,password);\n}\n\n\nexport const getUser = () => {\n    return request('get', '/api/user/getAllData')\n}\n\nexport  const register = (ruleForm) => {\n    return request('post','/api/user/register',ruleForm)\n}\n\n\nexport const getDetailInfo = () => {\n    const token = localStorage.getItem('token');\n    if (!token) {\n\n        // Promise.reject 是 Promise 对象的一个静态方法，\n        // 用于返回一个被拒绝（rejected）的 Promise 实例。\n        // Promise.reject 返回的 Promise 实例会以指定的理由（reason）被拒绝，\n        // 可以在后续的 catch 方法中捕获并处理该拒绝。\n        return Promise.reject(\"Missing the token!\");\n    }\n\n    return new Promise((resolve, reject) => {\n        axios.get('/api/user/info', {\n            params: {\n                token: token\n            }\n        }).then(response => {\n            resolve(JSON.parse(response.data.msg));\n        }).catch(error => {\n            reject(error);\n        });\n    });\n};\n\n\nexport const getUserInfo = () => {\n    const token = localStorage.getItem('token')\n\n    if (!token){\n        router.push('/login')\n        return \"Missing token\"\n    }\n    return axios.get('/api/user/info/',{\n        params:{\n            token:store.state.token\n        }\n    })\n    };\n\nexport const testlogin = () => {\n    const data = {\n        name:'',\n        password:''\n    }\n    const response = axios.get('/api/user/login',data)\n    const result =response.data;\n        if(result.code === '0'){\n            const token = response.data.data;\n            localStorage.setItem('token',token)\n        }else {\n            alert(\"账号或密码错误！\")\n        }\n}\nexport const logout = () => {\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n    this.$store.commit('setToken', null);\n    this.$router.push('/login');\n    return axios.get('/api/user/logout')\n}\n\n//productAPI\n\nexport const getFruit = () => {\n    return axios.get('/api/product/findAll')\n\n\n}\nexport const addFruit = () => {\n    return request('post','/add')\n}\n\n// articleAPI\nexport const getArticle=()=>{\n    return request('get','/api/article/findAll')\n\n}\n\nexport const writeArticle = (article) =>{\n    return request('post','/api/article/write',article)\n}\n\nexport const getSelfArticle = (id) => {\n    return axios.get(`/api/article/myblog/${id}`);\n}\n\n\n\nexport default {\n    getFruit,\n    login,\n    getUser,\n    register,\n    getArticle,\n    writeArticle,\n    getToken,\n    getUserInfo,\n    requestWithParams,\n    logout,\n    getDetailInfo,\n    getSelfArticle,\n    testlogin\n    // 导出其他接口函数...\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}