{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport { mapActions } from 'vuex';\nimport Footer from \"@/components/Footer.vue\";\nconst API_LOGIN = 'http://hotan.site:8088/api/user/login';\nexport default {\n  name: 'LoginPage',\n  components: {\n    Footer\n  },\n  data() {\n    const validatePass = (rule, value, callback) => {\n      if (!value) {\n        callback(new Error('请输入用户名'));\n      } else {\n        callback();\n      }\n    };\n    const validatePass2 = (rule, value, callback) => {\n      if (!value) {\n        callback(new Error('请输入密码'));\n      } else if (value.length < 4 || value.length > 12) {\n        callback(new Error('密码长度必须在4-12之间'));\n      } else {\n        callback();\n      }\n    };\n    return {\n      loading: false,\n      ruleForm: {\n        name: '',\n        pass: ''\n      },\n      rules: {\n        name: [{\n          validator: validatePass,\n          trigger: 'blur'\n        }],\n        pass: [{\n          validator: validatePass2,\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  methods: {\n    ...mapActions(['saveToken']),\n    async submitForm() {\n      try {\n        const response = await axios.post(API_LOGIN, {\n          name: this.ruleForm.name,\n          password: this.ruleForm.pass\n        });\n        const data = response.data;\n        if (data.code === '0') {\n          const token = response.data.data;\n          localStorage.setItem('token', token);\n          alert('登录成功');\n          await this.$router.push('/firstpages');\n        } else {\n          console.log('登录失败');\n          alert('账号或密码错误');\n        }\n      } catch (error) {\n        console.error('登录错误：', error);\n      }\n    },\n    switchToRegistration() {\n      this.$router.push('/register');\n    },\n    LoginNow() {\n      this.$router.push('/firstpages');\n    }\n  }\n};","map":{"version":3,"names":["axios","mapActions","Footer","API_LOGIN","name","components","data","validatePass","rule","value","callback","Error","validatePass2","length","loading","ruleForm","pass","rules","validator","trigger","methods","submitForm","response","post","password","code","token","localStorage","setItem","alert","$router","push","console","log","error","switchToRegistration","LoginNow"],"sources":["src/views/login/index.vue"],"sourcesContent":["<template>\n  <div class=\"container\" :style=\"{'background-image': `url(${require('@/assets/header/headBackground.png')})`, 'background-size': 'auto 100%'}\">\n\n  <div class=\"login-container\">\n    <div class=\"login-content\">\n      <h1>Welcome</h1>\n      <p>Hotan-Blog</p>\n      <div class=\"logo\">\n        <img src=\"@/assets/logo/DeckLiza.png\" alt=\"Logo\">\n      </div>\n      <h2 class=\"form-title\">登录</h2>\n      <form @submit.prevent=\"submitForm\">\n        <div class=\"form-group\">\n          <input type=\"text\" placeholder=\"用户名\" v-model=\"ruleForm.name\">\n        </div>\n        <div class=\"form-group\">\n          <input type=\"password\" placeholder=\"密码\" v-model=\"ruleForm.pass\">\n        </div>\n        <button type=\"submit\">登录</button>\n      </form>\n      <p class=\"switch-link\" @click=\"switchToRegistration\">没有账号？去注册</p>\n    </div>\n\n  </div>\n    <Footer></Footer>\n\n\n  </div>\n\n</template>\n\n<script>\nimport axios from 'axios';\nimport { mapActions } from 'vuex';\nimport Footer from \"@/components/Footer.vue\";\n\nconst API_LOGIN = 'http://hotan.site:8088/api/user/login';\n\nexport default {\n  name: 'LoginPage',\n  components: {Footer},\n  data() {\n    const validatePass = (rule, value, callback) => {\n      if (!value) {\n        callback(new Error('请输入用户名'));\n      } else {\n        callback();\n      }\n    };\n    const validatePass2 = (rule, value, callback) => {\n      if (!value) {\n        callback(new Error('请输入密码'));\n      } else if (value.length < 4 || value.length > 12) {\n        callback(new Error('密码长度必须在4-12之间'));\n      } else {\n        callback();\n      }\n    };\n    return {\n      loading: false,\n      ruleForm: {\n        name: '',\n        pass: '',\n      },\n      rules: {\n        name: [\n          { validator: validatePass, trigger: 'blur' }\n        ],\n        pass: [\n          { validator: validatePass2, trigger: 'blur' }\n        ],\n      },\n    };\n  },\n  methods: {\n    ...mapActions(['saveToken']),\n    async submitForm() {\n      try {\n        const response = await axios.post(API_LOGIN, {\n          name: this.ruleForm.name,\n          password: this.ruleForm.pass,\n        });\n        const data = response.data;\n        if (data.code === '0') {\n          const token = response.data.data;\n          localStorage.setItem('token', token);\n          alert('登录成功');\n          await this.$router.push('/firstpages');\n        } else {\n          console.log('登录失败');\n          alert('账号或密码错误');\n        }\n      } catch (error) {\n        console.error('登录错误：', error);\n      }\n    },\n    switchToRegistration() {\n      this.$router.push('/register');\n    },\n    LoginNow(){\n      this.$router.push('/firstpages')\n    }\n  },\n};\n</script>\n\n<style scoped>\nbody {\n  position: relative;\n}\n\n.container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n\n}\n\n.login-container {\n  margin: 0;\n  padding: 0;\n  display: flex;\n  justify-content: center;\n\n  align-items: center;\n  height: 100vh;\n  /*background: linear-gradient(to right, #f7d1d7, #bfe3f1);*/\n}\n\n.login-content {\n  width: 400px;\n  padding: 30px;\n  background-color: #fff;\n  border-radius: 8px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n  text-align: center;\n}\n\n.logo {\n  text-align: center;\n  margin-bottom: 20px;\n}\n\n.logo img {\n  width: 100px;\n  height: 100px;\n}\n\n.form-title {\n  font-size: 24px;\n  font-weight: bold;\n  margin-bottom: 20px;\n}\n\n.form-group {\n  margin-bottom: 15px;\n}\n\ninput[type=\"text\"],\ninput[type=\"password\"] {\n  width: 100%;\n  padding: 10px;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  outline: none;\n}\n\nbutton {\n  width: 100%;\n  padding: 10px;\n  border: none;\n  border-radius: 4px;\n  background-color: #69b3f0;\n  color: #fff;\n  font-size: 16px;\n  font-weight: bold;\n  cursor: pointer;\n  outline: none;\n}\n\n.switch-link {\n  color: #888;\n  cursor: pointer;\n}\n\n.switch-link:hover {\n  text-decoration: underline;\n}\n\n/* 添加z-index样式 */\nFooter {\n  position: fixed;\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  z-index: 100; /* 调整此值以确保Footer在其他内容之上 */\n}\n</style>\n"],"mappings":";AAgCA,OAAAA,KAAA;AACA,SAAAC,UAAA;AACA,OAAAC,MAAA;AAEA,MAAAC,SAAA;AAEA;EACAC,IAAA;EACAC,UAAA;IAAAH;EAAA;EACAI,KAAA;IACA,MAAAC,YAAA,GAAAA,CAAAC,IAAA,EAAAC,KAAA,EAAAC,QAAA;MACA,KAAAD,KAAA;QACAC,QAAA,KAAAC,KAAA;MACA;QACAD,QAAA;MACA;IACA;IACA,MAAAE,aAAA,GAAAA,CAAAJ,IAAA,EAAAC,KAAA,EAAAC,QAAA;MACA,KAAAD,KAAA;QACAC,QAAA,KAAAC,KAAA;MACA,WAAAF,KAAA,CAAAI,MAAA,QAAAJ,KAAA,CAAAI,MAAA;QACAH,QAAA,KAAAC,KAAA;MACA;QACAD,QAAA;MACA;IACA;IACA;MACAI,OAAA;MACAC,QAAA;QACAX,IAAA;QACAY,IAAA;MACA;MACAC,KAAA;QACAb,IAAA,GACA;UAAAc,SAAA,EAAAX,YAAA;UAAAY,OAAA;QAAA,EACA;QACAH,IAAA,GACA;UAAAE,SAAA,EAAAN,aAAA;UAAAO,OAAA;QAAA;MAEA;IACA;EACA;EACAC,OAAA;IACA,GAAAnB,UAAA;IACA,MAAAoB,WAAA;MACA;QACA,MAAAC,QAAA,SAAAtB,KAAA,CAAAuB,IAAA,CAAApB,SAAA;UACAC,IAAA,OAAAW,QAAA,CAAAX,IAAA;UACAoB,QAAA,OAAAT,QAAA,CAAAC;QACA;QACA,MAAAV,IAAA,GAAAgB,QAAA,CAAAhB,IAAA;QACA,IAAAA,IAAA,CAAAmB,IAAA;UACA,MAAAC,KAAA,GAAAJ,QAAA,CAAAhB,IAAA,CAAAA,IAAA;UACAqB,YAAA,CAAAC,OAAA,UAAAF,KAAA;UACAG,KAAA;UACA,WAAAC,OAAA,CAAAC,IAAA;QACA;UACAC,OAAA,CAAAC,GAAA;UACAJ,KAAA;QACA;MACA,SAAAK,KAAA;QACAF,OAAA,CAAAE,KAAA,UAAAA,KAAA;MACA;IACA;IACAC,qBAAA;MACA,KAAAL,OAAA,CAAAC,IAAA;IACA;IACAK,SAAA;MACA,KAAAN,OAAA,CAAAC,IAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}