{"ast":null,"code":"import Vue from \"vue\";\nimport VueRouter from \"vue-router\";\nimport register from \"@/views/register/index.vue\";\nimport todolist from \"@/site/product/todolist/todolist.vue\";\nimport home from \"@/pages/Home.vue\";\nimport about from \"@/site/about/about.vue\";\nimport blog from \"@/pages/Blog.vue\";\nimport product from \"@/site/product/mianpage/index.vue\";\nimport github from \"@/site/github/github.vue\";\nimport login from \"@/views/login/index.vue\";\nimport Dashboard from \"@/views/fruit/Dashboard.vue\";\nimport detail from \"@/views/fruit/detail/FruitDetail.vue\";\nimport searchView from \"@/views/fruit/search/SearchView.vue\";\nimport edit from \"@/views/fruit/edit/index.vue\";\nimport add from \"@/views/fruit/add/index.vue\";\nimport userdetail from \"@/views/user/userdetail/index.vue\";\nimport store from \"@/store/store\";\nimport info from \"@/pages/Info.vue\";\nimport { head } from \"axios\";\nimport header from \"@/components/Header.vue\";\nimport mylogin from \"@/views/login/mylogin.vue\";\nimport firstPages from \"@/components/FirstPages.vue\";\nimport changePass from \"@/pages/ChangePass.vue\";\nimport aboutProduct from \"@/site/about/aboutProduct.vue\";\nimport aboutOtherProduct from \"@/site/about/aboutOtherProduct.vue\";\nVue.use(VueRouter);\n// function isAuthenticated() {\n//     const user = JSON.parse(localStorage.getItem('user'));\n//     return user && user.token;\n// }\n\nconst routes = [{\n  path: '/',\n  redirect: '/login'\n}, {\n  path: '/register',\n  component: register\n}, {\n  path: '/todolist',\n  component: todolist\n}, {\n  path: '/home',\n  component: home,\n  // meta:{\n  //     requiresAuth:true\n  // },\n\n  children: [{\n    path: '/about',\n    component: about,\n    meta: {\n      requiresAuth: true\n    }\n  }, {\n    path: '/blog',\n    component: blog,\n    meta: {\n      requiresAuth: true\n    }\n  }, {\n    path: '/product',\n    component: product,\n    meta: {\n      requiresAuth: true\n    }\n  }, {\n    path: '/info',\n    component: info,\n    meta: {\n      requiresAuth: true\n    }\n  }, {\n    path: '/firstpages',\n    component: firstPages,\n    meta: {\n      requiresAuth: true\n    }\n  }, {\n    path: '/aboutProduct',\n    component: aboutProduct,\n    meta: {\n      requiresAuth: true\n    }\n  }, {\n    path: '/aboutOtherProduct',\n    component: aboutOtherProduct,\n    meta: {\n      requiresAuth: true\n    }\n  }, {\n    path: '/github',\n    component: github,\n    children: []\n  }]\n}, {\n  path: '/login',\n  component: login\n}, {\n  path: '/changePass',\n  component: changePass\n}, {\n  path: '/dashboard',\n  component: Dashboard,\n  children: [{\n    path: '/detail',\n    component: detail\n  }, {\n    path: '/search',\n    component: searchView\n  }, {\n    path: '/edit',\n    component: edit\n  }, {\n    path: '/add',\n    component: add\n  }, {\n    path: '/userdetail',\n    component: userdetail\n  }]\n}, {\n  path: '/header',\n  component: header\n}];\nconst router = new VueRouter({\n  mode: 'hash',\n  routes\n});\nrouter.beforeEach((to, from, next) => {\n  const token = localStorage.getItem('token');\n  if (to.matched.some(record => record.meta.requiresAuth)) {\n    // 需要登录验证的路由\n    if (!token) {\n      // 存在 token，允许跳转到目标路由\n      next('/login');\n    } else {\n      // 不存在 token，跳转到登录页\n      next();\n    }\n  } else {\n    // 不需要登录验证的路由，直接允许跳转\n    next();\n  }\n});\nexport default router;","map":{"version":3,"names":["Vue","VueRouter","register","todolist","home","about","blog","product","github","login","Dashboard","detail","searchView","edit","add","userdetail","store","info","head","header","mylogin","firstPages","changePass","aboutProduct","aboutOtherProduct","use","routes","path","redirect","component","children","meta","requiresAuth","router","mode","beforeEach","to","from","next","token","localStorage","getItem","matched","some","record"],"sources":["/Users/chenhetian/04Front_end/FruitVue0629/hotan-blog/src/router/router.js"],"sourcesContent":["import Vue from \"vue\";\nimport VueRouter from \"vue-router\";\nimport register from \"@/views/register/index.vue\";\nimport todolist from \"@/site/product/todolist/todolist.vue\";\nimport home from \"@/pages/Home.vue\";\nimport about from \"@/site/about/about.vue\";\nimport blog from \"@/pages/Blog.vue\";\nimport product from \"@/site/product/mianpage/index.vue\";\nimport github from \"@/site/github/github.vue\";\nimport login from \"@/views/login/index.vue\";\nimport Dashboard from \"@/views/fruit/Dashboard.vue\";\nimport detail from \"@/views/fruit/detail/FruitDetail.vue\";\nimport searchView from \"@/views/fruit/search/SearchView.vue\";\nimport edit from \"@/views/fruit/edit/index.vue\";\nimport add from \"@/views/fruit/add/index.vue\";\nimport userdetail from \"@/views/user/userdetail/index.vue\";\nimport store from \"@/store/store\";\nimport info from \"@/pages/Info.vue\";\nimport {head} from \"axios\";\nimport header from \"@/components/Header.vue\";\nimport mylogin from \"@/views/login/mylogin.vue\";\nimport firstPages from \"@/components/FirstPages.vue\";\nimport changePass from \"@/pages/ChangePass.vue\";\nimport aboutProduct from \"@/site/about/aboutProduct.vue\";\nimport aboutOtherProduct from \"@/site/about/aboutOtherProduct.vue\";\n\n\nVue.use(VueRouter)\n// function isAuthenticated() {\n//     const user = JSON.parse(localStorage.getItem('user'));\n//     return user && user.token;\n// }\n\nconst routes = [\n    { path: '/', redirect: '/login'},\n    { path:'/register',component: register},\n    {path:'/todolist',component: todolist},\n    { path: '/home',component: home,\n        // meta:{\n        //     requiresAuth:true\n        // },\n\n        children: [\n            { path:'/about',component: about,meta:{requiresAuth:true}},\n            { path:'/blog',component: blog,meta:{requiresAuth:true}},\n            { path:'/product',component: product,meta:{requiresAuth:true}},\n            { path: '/info',component: info,meta:{requiresAuth:true}},\n            {path:'/firstpages',component: firstPages,meta:{requiresAuth:true}},\n            { path:'/aboutProduct',component: aboutProduct,meta:{requiresAuth:true}},\n            { path:'/aboutOtherProduct',component: aboutOtherProduct,meta:{requiresAuth:true}},\n\n            { path:'/github',component: github,\n            children:[\n            ]}\n\n        ]},\n    { path: '/login',component: login},\n    { path: '/changePass',component: changePass},\n    { path: '/dashboard',component: Dashboard,\n        children:[\n            { path:'/detail',component: detail},\n            { path: '/search',component: searchView},\n            { path:'/edit',component: edit},\n            { path:'/add',component: add},\n            { path:'/userdetail',component: userdetail}\n\n        ]},\n    {path :'/header',component: header}\n\n]\n\nconst router = new VueRouter({\n    mode:'hash',\n    routes,\n})\nrouter.beforeEach((to, from, next) => {\n    const token = localStorage.getItem('token')\n\n    if (to.matched.some(record => record.meta.requiresAuth)) {\n        // 需要登录验证的路由\n        if (!token) {\n            // 存在 token，允许跳转到目标路由\n            next('/login')\n        } else {\n            // 不存在 token，跳转到登录页\n            next()\n        }\n    } else {\n        // 不需要登录验证的路由，直接允许跳转\n        next()\n    }\n})\n\nexport default router\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}